@model UniversityProject.Core.DTOs.BannerDto

<title>افزودن کتاب جدید</title>
<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>افزودن کتاب جدید</h1>
    <ol class="breadcrumb">
        <li><a href="/Admin"><i class="fa fa-dashboard"></i> خانه</a></li>
        <li class="active"> <a href="/Admin/Banner">لیست کتاب ها</a></li>
    </ol>
</section>
<section class="content">
    <div class="row">
        <div class="col-md-12">
            <div class="box box-success">
                <!-- form start -->
                <form role="form" action="@ViewBag.ReturnUrl" method="post" enctype="multipart/form-data">
                    <div class="hidden">
                        <input type="hidden" value="@Model.Id" asp-for="Id" />
                        <input type="hidden" value="@Model.ImageName" asp-for="ImageName" />
                    </div>
                    <div class="box-body">
                        <div class="form-group">
                            <label for="@Model.Position">توضیحات</label>
                            <input type="number" class="form-control" asp-for="@Model.Position" id="@Model.Position" />
                        </div>
                        <div class="form-group">
                            <label for="@Model.Title">عنوان</label>
                            <input type="text" class="form-control" asp-for="@Model.Title" id="@Model.Title" placeholder="عنوان">
                        </div>
                        <div>
                            <label>لینک اسلایدر</label>
                            <select asp-for="LinkUrl">
                                <option value=" ">بدون لینک</option>
                                @foreach (var item in Model.BookTitles)
                                {
                                    <option value="@item.LinkType/@item.Id">
                                        @(item.LinkType == "Book" ? "کتاب" : "گروه")
                                        @item.Title
                                    </option>
                                }
                            </select>
                        </div>
                        <div class="form-group">
                            <label>تصویر</label>
                            <input accept="image/*" type="file" onchange="previewFile(this)" asp-for="Image" />
                        </div>
                        <div class="form-group">
                            <img id="previewImg" src="@(Model.ImageName != null ? "/Images/Banners/" + Model.ImageName : " ")" alt="Placeholder" class="img-responsive">
                        </div>
                    </div>
                    <!-- /.box-body -->

                    <div class="box-footer">
                        <button type="submit" class="btn btn-primary">ارسال</button>
                        <a href="/Admin/Slider" class="pull-left btn btn-warning">بازگشت</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

@section Styles
{
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/css/selectize.bootstrap3.min.css" integrity="sha256-ze/OEYGcFbPRmvCnrSeKbRTtjG4vGLHXgOqsyLFTRjg=" crossorigin="anonymous" />
}

@section Scripts
{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/js/standalone/selectize.min.js" integrity="sha256-+C0A5Ilqmu4QcSPxrlGpaZxJ04VjsRjKu+G82kl5UJk=" crossorigin="anonymous"></script>

    <script type="text/javascript">
        $(document).ready(function () {

            $('select').selectize({
                sortField: 'text'
            });

            if ('@Model.ImageName' == " ") {
                $("#previewImg").addClass("hidden");
            }
        });

        function previewFile(input){
            var file = $("input[type=file]").get(0).files[0];
            if(file){
                var reader = new FileReader();
                reader.onload = function(){
                    $("#previewImg").attr("src", reader.result);
                }
                reader.readAsDataURL(file);
            }
            $("#previewImg").removeClass("hidden");
        }

        var showModal =@ViewBag.ShowModal;
        $(function() {
            if (showModal==true) {
                $('#myModal').modal('show');
            }
        });
    </script>
}
